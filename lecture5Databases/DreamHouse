DROP TABLE IF EXISTS registration_t;
DROP TABLE IF EXISTS viewing_t;
DROP TABLE IF EXISTS property_for_rent_t;
DROP TABLE IF EXISTS private_owner_t;
DROP TABLE IF EXISTS client_t;
DROP TABLE IF EXISTS staff_t;
DROP TABLE IF EXISTS branch_t;

CREATE TABLE BRANCH_t(
	Branch_No 		VARCHAR(4) NOT NULL,
	Street 			VARCHAR(30),
	City 			VARCHAR(15),
	Postcode 		VARCHAR(8),

 	CONSTRAINT BRANCH_PK PRIMARY KEY(Branch_No));

CREATE TABLE STAFF_t(
	Staff_No 		VARCHAR(4) NOT NULL,
	F_Name 			VARCHAR(10),
	L_Name 			VARCHAR(15),
	Position 		VARCHAR(15),
	Sex 			CHAR(1),
	DOB 			VARCHAR(9),
	Salary 			INT,
	Branch_No 		VARCHAR(4),
	CONSTRAINT STAFF_PK PRIMARY KEY (Staff_No),
	CONSTRAINT STAFF_FK1 FOREIGN KEY (Branch_No) REFERENCES BRANCH_t(Branch_No));

CREATE TABLE PRIVATE_OWNER_t(
	Owner_No 		VARCHAR(4) NOT NULL,
	F_Name 			VARCHAR(10),
	L_Name 			VARCHAR(15),
	Address 		VARCHAR(45),
	Tel_No 			VARCHAR(12),
	CONSTRAINT PRIVATE_OWNER_PK PRIMARY KEY(Owner_No));

CREATE TABLE CLIENT_t(
	Client_No 		VARCHAR(4) NOT NULL,
	F_Name 			VARCHAR(10),
	L_Name 			VARCHAR(15),
	Tel_No 			VARCHAR(12),
	Pref_Type 		VARCHAR(8),
	Max_Rent 		INT,
	CONSTRAINT CLIENT_PK PRIMARY KEY(Client_No));

CREATE TABLE PROPERTY_FOR_RENT_t(
	Property_No 	VARCHAR(4) NOT NULL,
	Street 			VARCHAR(20),
	City 			VARCHAR(10),
	Postcode 		VARCHAR(8),
	Type 			VARCHAR(6),
	Rooms 			INT,
	Rent 			INT,
	Owner_No 		VARCHAR(4) NOT NULL,
	Staff_No 		VARCHAR(4) NOT NULL,
	Branch_No 		VARCHAR(4) NOT NULL,

	CONSTRAINT PROPERTY_FOR_RENT_PK PRIMARY KEY (Property_No),
	CONSTRAINT STAFF_FK2 FOREIGN KEY (Owner_No) REFERENCES PRIVATE_OWNER_t(Owner_No),
	CONSTRAINT STAFF_FK3 FOREIGN KEY (Staff_No) REFERENCES STAFF_t(Staff_No),
	CONSTRAINT STAFF_FK4 FOREIGN KEY (Branch_No) REFERENCES BRANCH_t(Branch_No));

CREATE TABLE VIEWING_t(
	Client_No 		VARCHAR(4) NOT NULL,
	Property_No 	VARCHAR(4) NOT NULL,
	View_Date 		VARCHAR(9),
	Comment 		VARCHAR(20),

	CONSTRAINT VIEWING_PK PRIMARY KEY (Client_No, Property_No),
	CONSTRAINT VIEWING_FK1 FOREIGN KEY (Client_No) REFERENCES CLIENT_t(Client_No),
	CONSTRAINT VIEWING_FK2 FOREIGN KEY (Property_No) REFERENCES PROPERTY_FOR_RENT_t(Property_No));

CREATE TABLE REGISTRATION_t(
	Client_No 		VARCHAR(4) NOT NULL,
	Branch_No 		VARCHAR(4) NOT NULL,
	Staff_No 		VARCHAR(4) NOT NULL,
	Date_Joined 	VARCHAR(9),

	CONSTRAINT REGISTRATION_PK PRIMARY KEY (Client_No, Branch_No, Staff_No),
	CONSTRAINT REGISTRATION_FK1 FOREIGN KEY (Client_No) REFERENCES CLIENT_t(Client_No),
    CONSTRAINT REGISTRATION_FK2 FOREIGN KEY (Branch_No) REFERENCES BRANCH_t(Branch_No),
	CONSTRAINT REGISTRATION_FK3 FOREIGN KEY (Staff_No) REFERENCES STAFF_t(Staff_No));
