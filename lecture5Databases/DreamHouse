DROP TABLE IF EXISTS VIEWING;
DROP TABLE IF EXISTS REGISTRATION;
DROP TABLE IF EXISTS PROPERTY_FOR_RENT;
DROP TABLE IF EXISTS PRIVATE_OWNER;
DROP TABLE IF EXISTS CLIENT;
DROP TABLE IF EXISTS STAFF;
DROP TABLE IF EXISTS BRANCH;

CREATE TABLE BRANCH(
	BranchNo VARCHAR(4) NOT NULL,
	Street VARCHAR(30),
	City VARCHAR(15),
	Postcode VARCHAR(8),

 	CONSTRAINT BRANCH_PK PRIMARY KEY(BranchNo)
) 	

CREATE TABLE STAFF(
	StaffNo VARCHAR(4) NOT NULL,
	F_Name VARCHAR(10),
	L_Name VARCHAR(15),
	Postion VARCHAR(15),
	Sex CHAR(1),
	DOB VARCHAR(9).
	Salary INT,
	BranchNo VARCHAR(4) NOT NULL,

	CONSTRAINT STAFF_PK PRIMARY KEY (StaffNo),
	CONSTRAINT STAFF_FK1 FOREIGN KEY (BranchNo) REFERENCES BRANCH(BranchNo));
)

CREATE TABLE PRIVATE_OWNER(
	OwnerNo VARCHAR(4) NOT NULL,
	F_Name VARCHAR(10),
	L_Name VARCHAR(15),
	Address VARCHAR(45),
	TelNo VARCHAR(12),

	CONSTRAINT PRIVATE_OWNER_PK PRIMARY KEY(OwnerNo)
)

CREATE TABLE CLIENT(
	ClientNo VARCHAR(4) NOT NULL,
	F_Name VARCHAR(10),
	L_Name VARCHAR(15),
	TelNo VARCHAR(12),
	Pref_Type VARCHAR(8),
	Max_Rent INT,

	CONSTRAINT CLIENT_PK PRIMARY KEY(ClientNo)
)

CREATE TABLE PROPERTY_FOR_RENT(
	Property_No VARCHAR(4) NOT NULL,
	Stret VARCHAR(20),
	City VARCHAR(10),
	Postcode VARCHAR(8),
	Type Postcode VARCHAR(8),
	Rooms INT,
	Rent INT,
	OwnerNo VARCHAR(4) NOT NULL,
	StaffNo VARCHAR(4) NOT NULL,
	BranchNo VARCHAR(4) NOT NULL,

	CONSTRAINT PROPERTY_FOR_RENT_PK PRIMARY KEY (Property_No),
	CONSTRAINT STAFF_FK1 FOREIGN KEY (OwnerNo) REFERENCES PRIVATE_OWNER(OwnerNo));
	CONSTRAINT STAFF_FK2 FOREIGN KEY (StaffNo) REFERENCES STAFF(StaffNo));
	CONSTRAINT STAFF_FK3 FOREIGN KEY (BranchNo) REFERENCES BRANCH(BranchNo));
)

CREATE TABLE VIEWING(
	ClientNo VARCHAR(4) NOT NULL,
	Property_No VARCHAR(4) NOT NULL,
	ViewDate VARCHAR(9),
	Comment VARCHAR(20),

	CONSTRAINT VIEWING_PK PRIMARY KEY (ClientNo, Property_No),
	CONSTRAINT VIEWING_FK1 FOREIGN KEY (ClientNo) REFERENCES CLIENT(ClientNo));
	CONSTRAINT VIEWING_FK2 FOREIGN KEY (Property_No) REFERENCES PROPERTY_FOR_RENT(Property_No));
)

CREATE TABLE REGISTRATION(
	ClientNo VARCHAR(4) NOT NULL,
	BranchNo VARCHAR(4) NOT NULL,
	StaffNo VARCHAR(4) NOT NULL,
	DateJoined VARCHAR(9),

	CONSTRAINT REGISTRATION_PK PRIMARY KEY (ClientNo, BranchNo, StaffNo),
	CONSTRAINT REGISTRATION_FK1 FOREIGN KEY (ClientNo) REFERENCES CLIENT(ClientNo));
	CONSTRAINT REGISTRATION_FK2 FOREIGN KEY (BranchNo) REFERENCES BRANCH(BranchNo));
	CONSTRAINT REGISTRATION_FK3 FOREIGN KEY (StaffNo) REFERENCES STAFF(StaffNo));
)